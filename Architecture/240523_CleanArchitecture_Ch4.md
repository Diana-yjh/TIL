# 📝 TIL - 2405XX CleanArchitecture Ch.4

해당 글은 마틴 파울러의 `클린아키텍처 4부 - 컴포넌트 원칙` 을 토대로 작성되었습니다.

## 학습 내용
[1. 컴포넌트](#-1-컴포넌트)</br>
[2. 컴포넌트 응집도](#-2-컴포넌트-응집도)</br>
[3. 컴포넌트 결합](#-3-컴포넌트-결합)</br>
[4. 참고 자료](#4-참고-자료)</br>

</br>

### ✅ 1. 컴포넌트

컴포넌트는 시스템의 구성요소로 **배포할 수 있는 가장 단위** 입니다.(배포 단위)</br>
iOS에서는 .ipa 파일을 말하죠.</br>

우리는 여러 컴포넌트를 서로 링크하여 실행 가능한 단일파일로 생성할 수도 있습니다.</br>
컴포넌트는 마지막에 어떤 형태로 배포되든 반드시 독립적으로 배포 가능한, 즉 독립적으로 개발 가능한 능력을 갖추고 있어야 합니다.</br>

</br>

### ✅ 2. 컴포넌트 응집도

컴포넌트 응집도와 관련해서는 아래와 같이 세 가지 원칙을 고려해야 합니다.</br>

#### 1. REP: 재사용/릴리스 등가 원칙
**재사용 단위는 릴리스 단위와 같다** </br>

소프트웨어는 릴리스 절차를 통해 추적 관리 되어야 합니다.</br>
그렇지 않으면 재사용 컴포넌트들이 서로 호환되는지 보장할 수 있는 방법이 없고 더 나아가 개발자 입장에서 릴리스 버전 관리가 되지 않은 소프트웨엉의 변경사항을 알기란 불가능에 가깝기 때문이죠.</br>

이 원칙은 소프트웨어 설계와 아키텍처 관점에서 봤을 때 **단일 컴포넌트는 응집성 높은 클래스와 모듈들로 구성되어야 함** 을 의미합니다.</br>
이 말을 약간 다른 시각에서 이야기 해보자면 

- 하나의 컴포넌트로 묶인 클래스와 모듈은 반드시 함께 릴리스 할 수 있어야 한다.
- 하나의 컴포넌트로 묶인 클래스와 모듈은 버전 번호가 같아야 한다.
- 하나의 컴포넌트로 묶인 클래스와 모듈은 동일한 릴리스로 추적 관리 되어야 한다.
- 하나의 컴포넌트로 묶인 클래스와 모듈은 동일한 릴리스 문서에 포함되어야 한다.

이 모두 동일한 이야기 입니다.</br>

#### 2. CCP: 공통 폐쇄 원칙

**동일한 이유로 동일한 시점에서 변경되는 클래스를 같은 컴포넌트로 묶어라.**</br>

이 원칙은 어디서 많이 본적이 있죠?</br>

바로 SRP(단일 책임 원칙)을 컴포넌트 관점에서 다시 쓴 것입니다.</br>

결국 **같은 이유로 변경될 가능성이 있는 클래스는 모두 한곳으로 묶으라** 는 것이죠.</br>

#### 3. CRP: 공통 재사용 원칙

**컴포넌트 사용자들을 필요하지 않는 것에 의존하게 강요하지 말라.**</br>

공통 재사용 원칙은 클래스와 모듈을 어느 컴포넌트에 위치 시킬지 결정할 때 도움이 되는 원칙입니다.</br>
재사용 가능한 클래스는 단독으로가 아닌 재사용 모듈의 일부로써 해당 모듈의 다른 클래스와 상호작용하는 경우가 많습니다.</br>
따라서 CRP에서는 이런 클래스들이 동일한 컴포넌트 내부에서 수많은 의존성을 생성하도록 포함시켜야 한다는 것이죠.</br>
또한 CRP는 이렇게 클래스들을 묶었을 때 의존하는 컴포넌트가 해당 컴포넌트의 모든 클래스에 대해 의존하는지를 확인해야 한다고 합니다.</br>
즉 A 컴포넌트가 B 컴포넌트를 사용한다고 했을 때 A 컴포넌트 내부의 단 하나의 클래스만이 B 컴포넌트를 사용한다면 불필요한 의존성이 생긴다는 것이죠.</br>

CRP는 ISP의 포괄적인 버전입니다.</br>
사용하지 않는 클래스를 가진 컴포넌트에 의존하지 말라고 조언하죠.</br>
ISP와 동일하게 필요하지 않은 것에 의존하지 말라고 합니다</br>

#### 컴포넌트 응집도에 대한 균형 다이어그램

우리가 앞서 살펴보았던 REP, CCP, CRP은 서로 상충되는 원칙을 가지고 있습니다.</br>

<img src = “” width = “500”/></br>
(~~이미지는 다운로드 받아오면 된다는 것을 뒤늦게 깨닳아버림~~)</br>

각각 REP, CCP는 포함, CRP는 배제 원칙의 특징을 보여줍니다.</br>
우리는 여기서 균형을 이룰 방법을 찾아야 하죠.</br>

</br>
